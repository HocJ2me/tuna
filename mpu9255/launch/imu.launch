<launch>

	<node pkg="mpu9255" name="mpu9255_node" type="mpu9255_node" output="screen">
		<param name="print_min_max_mag" value="true"/> <!-- Prints the mag bias values -->
		<param name="print_min_max_acc" value="true"/> <!-- For checking the range of accel -->
		<param name="print_rolling_mean_acc" value="true"/> <!-- For checking the stationary bias of accel -->

		<param name="imu_covar" value="0.05"/>
		<param name="mag_covar" value="0.05"/>

		<param name="acc_bias_x" value="-0.3"/> <!--1.5 -->
		<param name="acc_bias_y" value="0"/> <!-- -0.48 -->
		<param name="acc_bias_z" value="0.265"/> <!-- 0.85 -->

		<param name="gyr_bias_x" value="0"/>
		<param name="gyr_bias_y" value="0"/>
		<param name="gyr_bias_z" value="0"/>

		<remap from="/imu/data_raw" to="/imu/data_uncalibrated"/>
	</node>

	<node pkg="imu_calib" name="imu_calibration_node" type="apply_calib">
		<param name="calib_file" value="$(find imu_calib)/imu_calib.yaml"/>
		<param name="calibrate_gyros" value="true"/>
		<param name="gyro_calib_samples" value="100"/>

		<remap from="raw" to="/imu/data_uncalibrated"/>
		<remap from="corrected" to="/imu/data_raw"/>
	</node>

	<node pkg="tuna_nav" name="imu_filter" type="imu_filter.py"/>

	<!--<node pkg="imu_complementary_filter" type="complementary_filter_node" name="complementary_filter_node" output="screen">
		<param name="fixed_frame" value="base_link"/>
		<param name="use_mag" value="true"/>
		<param name="do_bias_estimation" value="true"/>
		<param name="do_adaptive_gain" value="false"/>
		<param name="gain_acc" value="0.01"/>
		<param name="gain_mag" value="0.01"/>
 		<param name="publish_tf" value="false"/>
	</node>-->

	<!--<node pkg="imu_filter_madgwick" type="imu_filter_node" name="imu_filter_node" output="screen">
		<param name="gain" value="0.1"/>
		<param name="orientation_stddev" value="0.1"/>

		<param name="mag_bias_x" value="0.0"/>
		<param name="mag_bias_y" value="0.0"/>
		<param name="mag_bias_z" value="0.0"/>
		<param name="world_frame" value="enu"/>
		<param name="fixed_frame" value="base_link"/>
		<param name="use_magnetic_field_msg" value="true"/>
		<param name="publish_tf"    value="false"/> 
		<param name="remove_gravity_vector" value="true"/>
	</node>-->

	<!--<node pkg="imu_complementary_filter" type="imu_filter_node" name="imu_filter_node" output="screen">
		<param name="gain" value="0.5"/>
		<param name="zeta" value="-0.01"/>
		<param name="orientation_stddev" value="0.1"/>

		<param name="mag_bias_x" value="0.000009"/>
		<param name="mag_bias_y" value="-0.000012"/>
		<param name="mag_bias_z" value="0.0"/>
		<param name="world_frame" value="enu"/>
		<param name="fixed_frame" value="base_link"/>
		<param name="use_magnetic_field_msg" value="true"/>
 		<param name="publish_tf" value="false"/>
		<param name="remove_gravity_vector" value="false"/>
	</node>

	<node pkg="imu_complementary_filter" type="complementary_filter_node" name="complementary_filter_gain_node" output="screen">
		<param name="do_bias_estimation" value="false"/>
		<param name="do_adaptive_gain" value="false"/>
		<param name="use_mag" value="true"/>
		<param name="gain_acc" value="0.5"/>
		<param name="gain_mag" value="0.5"/>
	</node>-->


</launch>
